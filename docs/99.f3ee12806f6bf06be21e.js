(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[99],{1099:(t,a,e)=>{"use strict";e.r(a),e.d(a,{ListAttributeMappingModule:()=>Z});var i=e(8583),r=e(1558),s=e(8071),o=e(8002),p=e(1003),n=e(7716),d=e(2688),u=e(721),c=e(1355),h=e(7423),l=e(3321),g=e(665),b=e(235),A=e(1453);function M(t,a){if(1&t){const t=n.EpF();n.TgZ(0,"div",5),n.TgZ(1,"h4",6),n._uU(2,"Add"),n.qZA(),n.TgZ(3,"button",7),n.NdJ("click",function(){n.CHM(t);const a=n.MAs(8),e=n.oxw();return null!=e.modalRef&&e.modalRef.hide(),a.reset()}),n.TgZ(4,"span",8),n._uU(5,"\xd7"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"div",9),n.TgZ(7,"form",null,10),n.TgZ(9,"div",0),n.TgZ(10,"div",11),n.TgZ(11,"app-Dropdown-Input",12),n.NdJ("sharedVarChange",function(a){return n.CHM(t),n.oxw().addAttributeMapping.productAttributeId=a}),n.qZA(),n.qZA(),n.TgZ(12,"div",11),n.TgZ(13,"app-Dropdown-Input",13),n.NdJ("sharedVarChange",function(a){return n.CHM(t),n.oxw().addAttributeMapping.productCategoryId=a}),n.qZA(),n.qZA(),n.TgZ(14,"div",11),n.TgZ(15,"app-Text-Input",14),n.NdJ("FoucsChange",function(){return n.CHM(t),n.oxw().checkUnit()})("sharedVarChange",function(a){return n.CHM(t),n.oxw().addAttributeMapping.unit=a}),n.qZA(),n.qZA(),n.TgZ(16,"div",15),n.TgZ(17,"button",16),n.NdJ("click",function(){n.CHM(t);const a=n.MAs(8);return n.oxw().submit(a),a.reset()}),n._uU(18,"Save"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&t){const t=n.MAs(8),a=n.oxw();n.xp6(11),n.Q6J("isMandatory",!1)("sharedVar",a.addAttributeMapping.productAttributeId)("dropDownData",a.attributeData),n.xp6(2),n.Q6J("isMandatory",!1)("sharedVar",a.addAttributeMapping.productCategoryId)("dropDownData",a.parentCategoriesData),n.xp6(2),n.Q6J("isMandatory",!0)("DuplicateError",a.isCheckAttributeMapping)("sharedVar",a.addAttributeMapping.unit),n.xp6(2),n.Q6J("disabled",!t.valid||a.isCheckAttributeMapping)}}const C=r.Bz.forChild([{path:"",component:(()=>{class t{constructor(t,a,e,i){this.http=t,this.modalService=a,this.toastr=e,this.loader=i,this.values=[{value:"productAttributeName"},{value:"productCategoryName"},{value:"unit"}],this.headers=["Attribute Name","Category Name","Unit"],this.tableData=[],this.dtOptions={},this.attributeMappingData={},this.parentCategoriesData=[],this.checkAttributeMapping={},this.isCheckAttributeMapping=!1,this.addAttributeMapping={},this.attributeData={},this.config={backdrop:!0,ignoreBackdropClick:!0},this.getAllAttributeMappingData$=this.http.get(`${p.s.url}ProductAttributeCategoryMapping/GetAllMappingAsync`).pipe((0,o.U)(t=>{this.attributeMappingData=t,this.attributeMappingData=this.attributeMappingData.data,this.tableData=this.attributeMappingData,console.log(this.tableData)})),this.saveAttributeMappingData$=this.http.create(`${p.s.url}ProductAttributeCategoryMapping/Add`,this.addAttributeMapping).pipe((0,o.U)(t=>{t.success&&this.toastr.showSuccess()})),this.getAllCategoriesData$=this.http.get(`${p.s.url}ProductCategory/allProductCategory`).pipe((0,o.U)(t=>{this.parentCategoriesData=t,this.parentCategoriesData=this.parentCategoriesData.data})),this.getAllAttributeData$=this.http.get(`${p.s.url}ProductAttribute/GetAttributeAsync`).pipe((0,o.U)(t=>{this.attributeData=t,this.attributeData=this.attributeData.data}))}checkAttributeMappingUnit$(){return this.http.post(`${p.s.url}ProductAttributeCategoryMapping/CheckDuplicacy`,this.addAttributeMapping).pipe((0,o.U)(t=>{this.checkAttributeMapping=t,this.isCheckAttributeMapping=this.checkAttributeMapping.data}))}ngOnInit(){this.getAllAttributeMappingData$.subscribe(),this.getAllCategoriesData$.subscribe(),this.getAllAttributeData$.subscribe()}openModal(t){this.modalRef=this.modalService.show(t,this.config)}checkUnit(){this.checkAttributeMappingUnit$().subscribe()}submit(t){const a=(0,s.z)(this.saveAttributeMappingData$,this.getAllAttributeMappingData$);this.loader.start(),a.subscribe(t=>{this.loader.stop(),this.modalRef.hide(),this.addAttributeMapping={}},t=>{this.toastr.showError(),this.loader.stop(),this.modalRef.hide()})}handleError(t){console.log(this.toastr)}}return t.\u0275fac=function(a){return new(a||t)(n.Y36(d.Y),n.Y36(u.tT),n.Y36(c.I),n.Y36(h.D))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-ListAttributeMapping"]],decls:10,vars:3,consts:[[1,"row"],[1,"col-md-12"],[1,"btn","btn-primary","float-right",3,"click"],[3,"data","headers","values"],["template",""],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","btn-close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],["ngForm","ngForm"],[1,"col-12"],["Label","Attribute","fieldId","productAttributeId","id","productAttributeId","text","name",3,"isMandatory","sharedVar","dropDownData","sharedVarChange"],["Label","Category","fieldId","productCategoryId","id","categoryId","text","formattedCategoryName",3,"isMandatory","sharedVar","dropDownData","sharedVarChange"],["label","Unit","fieldId","unit",3,"isMandatory","DuplicateError","sharedVar","FoucsChange","sharedVarChange"],[1,"col-12","mt-2"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(t,a){if(1&t){const t=n.EpF();n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"a",2),n.NdJ("click",function(){n.CHM(t);const e=n.MAs(9);return a.openModal(e)}),n._uU(3,"Add"),n.qZA(),n.TgZ(4,"h2"),n._uU(5,"Product Attribute Mapping"),n.qZA(),n.qZA(),n.TgZ(6,"div",1),n._UZ(7,"app-DataTable",3),n.qZA(),n.qZA(),n.YNc(8,M,19,10,"ng-template",null,4,n.W1O)}2&t&&(n.xp6(7),n.Q6J("data",a.tableData)("headers",a.headers)("values",a.values))},directives:[l.Q,g._Y,g.JL,g.F,b.i,A.t],styles:[""]}),t})()}]);var D=e(696);let Z=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[i.ez,C,g.u5,D.U,u.zk.forRoot()]]}),t})()}}]);